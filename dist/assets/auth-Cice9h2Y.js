const l="https://lm-server-server.onrender.com/api/login";document.addEventListener("DOMContentLoaded",()=>{document.getElementById("login-form").addEventListener("submit",async s=>{s.preventDefault();const r=document.getElementById("email").value,a=document.getElementById("password").value;try{const e=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:a})});if(!e.ok){const c=await e.json().catch(()=>({error:"Unknown error occurred"}));throw new Error(c.error)}const i=await e.json();console.log("Login successful:"),sessionStorage.setItem("token",i.token),alert("Login successful!"),t()}catch(e){console.error("Login failed:",e.message),alert("Login failed: "+e.message)}}),document.getElementById("logoutButton").addEventListener("click",function(){sessionStorage.removeItem("token"),t()}),t()});const o=document.getElementById("loginStatus");function t(){sessionStorage.getItem("token")?o.textContent="You are logged in. You can edit the calendar.":o.textContent="To edit the calendar, please log in."}window.addEventListener("beforeunload",function(){sessionStorage.removeItem("token")});
